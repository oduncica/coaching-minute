<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Coaching Minute</title>
    <link rel="icon" type="image/x-icon" href="src/assets/favicon.ico" />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@1,900&family=Open+Sans:wght@600&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="index.css" />
  </head>

  <body>
    <section id="accueil">
      <img src="src/assets/logo.png" alt="Logo Coaching Minute" class="logo" />

      <h2 class="bienvenue" id="titre-principal">Bienvenue</h2>

      <div class="intro">
        <p>
          Coaching Minute est une solution innovante de coaching audio pensée
          pour accompagner les étudiants à chaque étape de leur parcours.
        </p>
        <p>
          Vous avez besoin d’un coup de pouce pour mieux réussir vos études ?
          Vous vous interrogez sur votre orientation scolaire ? Il vous suffit
          de poser vos questions à notre IA : elle vous apportera des réponses
          claires, adaptées à votre profil, et à votre niveau scolaire.
        </p>
        <p>
          Grâce à Coaching Minute, avancez plus sereinement vers l’enseignement
          supérieur et prenez en main votre avenir en toute confiance.
        </p>
      </div>

      <script>
        function scrollToForm() {
          document
            .querySelector("#formulaire")
            .scrollIntoView({ behavior: "smooth" });
        }
      </script>

      <button class="btn" onclick="scrollToForm()">Continuer</button>
    </section>

    <section id="formulaire">
      <p class="intro">
        Entrez votre problème ci-dessous et cliquez sur "Soumettre" pour obtenir
        une réponse de votre coach.
      </p>

      <div class="form-container">
        <label for="user-input">Votre besoin :</label>
        <textarea
          id="user-input"
          placeholder="Décrivez votre problème ici..."
          rows="5"
          style="width: 100%"
        ></textarea>
        <button id="generate-btn" class="btn">Soumettre</button>
      </div>
      <div id="response-container" style="margin-top: 20px">
        <h3>Réponse :</h3>
        <p id="response-text"></p>
      </div>
    </section>

    <script>
      document
        .getElementById("generate-btn")
        .addEventListener("click", async () => {
          const userInput = document.getElementById("user-input").value.trim();
          const responseText = document.getElementById("response-text");

          if (!userInput) {
            responseText.textContent = "Veuillez entrer une requête.";
            return;
          }

          responseText.textContent = "Génération en cours...";

          try {
            const response = await fetch(
              "https://openrouter.ai/api/v1/chat/completions",
              {
                method: "POST",
                headers: {
                  Authorization:
                    "Bearer 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",
                  "Content-Type": "application/json",
                  // "HTTP-Referer": "https://votre-site.com", // Facultatif
                  // "X-Title": "Coaching Minute", // Facultatif
                },
                body: JSON.stringify({
                  model: "mistralai/mistral-small-3.1-24b-instruct:free",
                  messages: [
                    {
                      role: "user",
                      content: userInput,
                    },
                  ],
                }),
              }
            );

            const data = await response.json();

            if (
              data.choices &&
              data.choices[0] &&
              data.choices[0].message.content
            ) {
              responseText.textContent = data.choices[0].message.content;
            } else {
              responseText.textContent = "Aucune réponse générée.";
            }
          } catch (error) {
            responseText.textContent =
              "Erreur lors de la génération : " + error.message;
          }
        });
    </script>
  </body>
</html>
